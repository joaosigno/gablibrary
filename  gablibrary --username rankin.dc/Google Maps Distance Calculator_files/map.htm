
var localSearch=new GlocalSearch();var map;var bounds;var autopan;var routePoints=new Array((0x11fb+2157-0x1a68));var colour="\x23\x63\x63\x30\x30\x30\x30";var total_distance=(0x229+5582-0x17f7);var togglemarkers=(0x109+4726-0x137e);var lineWidth=(0x1488+3568-0x2273);var lineColor="\x23\x66\x66\x30\x30\x36\x36";var lines=[];var degreesPerRadian=180.0/Math.PI;var radiansPerDegree=Math.PI/180.0;var earthRadiusMeters=6367460.0;var metersPerDegree=2.0*Math.PI*earthRadiusMeters/360.0;var EARTH_RADIUS=6367000;var Icon=new GIcon(G_DEFAULT_ICON);Icon.image="\x68\x74\x74\x70\x3a\x2f\x2f\x77\x77\x77\x2e\x64\x61\x66\x74\x6c\x6f\x67\x69\x63\x2e\x63\x6f\x6d\x2f\x69\x6d\x61\x67\x65\x73\x2f\x47\x4d\x6d\x61\x72\x6b\x65\x72\x73\x2f\x73\x74\x72\x69\x70\x65\x73\x2e\x70\x6e\x67";Icon.shadow="\x68\x74\x74\x70\x3a\x2f\x2f\x77\x77\x77\x2e\x64\x61\x66\x74\x6c\x6f\x67\x69\x63\x2e\x63\x6f\x6d\x2f\x69\x6d\x61\x67\x65\x73\x2f\x47\x4d\x6d\x61\x72\x6b\x65\x72\x73\x2f\x73\x68\x61\x64\x6f\x77\x2e\x70\x6e\x67";Icon.iconSize=new GSize((0xbe7+2732-0x167f),(0x125a+4066-0x221a));Icon.shadowSize=new GSize((0xb9c+6934-0x268d),(0x46+9095-0x23ab));Icon.iconAnchor=new GPoint((0xf9c+5618-0x2585),(0x8b+6657-0x1a6a));Icon.infoWindowAnchor=new GPoint((0x6ff+4705-0x1957),(0x94b+1209-0xe02));Icon.infoShadowAnchor=new GPoint((0x349+8745-0x2560),(0x206+2494-0xbab));var MILES={label:"\x6d\x69\x6c\x65\x73",f:function(distance){return distance/1609.344;}};var KMS={label:"\x6b\x6d",f:function(distance){return distance/(0xfc9+2622-0x161f);}};var unit_handler=MILES;function Gload(){map=new GMap2(document.getElementById("\x6d\x61\x70"),{draggableCursor:"\x63\x72\x6f\x73\x73\x68\x61\x69\x72",draggingCursor:"\x70\x6f\x69\x6e\x74\x65\x72"});map.addControl(new GLargeMapControl());map.addControl(new GMapTypeControl());map.setCenter(new GLatLng((0x214a+856-0x24a2),(0x396+5453-0x18e3)),(0x2d1+3941-0x1235));map.disableScrollWheelZoom();map.addControl(new GScaleControl((0x1bf9+2622-0x2537)));bounds=new GLatLngBounds();autopan=document.getElementById("\x61\x75\x74\x6f\x70\x61\x6e").checked;GEvent.addListener(map,"\x63\x6c\x69\x63\x6b",function(overlay,point){if(point){routePoints.push(point);redraw();if(autopan==true){map.panTo(point);}updateDisplay();}});};function togglemarkersbtn(){if(togglemarkers==(0x1342+2773-0x1e16)){togglemarkers=(0x103c+5313-0x24fd);redraw();}else{togglemarkers=(0x95f+6068-0x2112);redraw();}};function autopantoggle(state){autopan=state;};function redraw(){map.clearOverlays();total_distance=(0x18b0+1403-0x1e2b);var marker=new GMarker(routePoints[(0x3c0+3241-0x1069)],Icon);bounds.extend(routePoints[(0x91f+5232-0x1d8f)]);if(togglemarkers==(0x16e9+1928-0x1e70))map.addOverlay(marker);GEvent.addListener(marker,"\x63\x6c\x69\x63\x6b",function(){routePoints.push(routePoints[(0x90+7767-0x1ee7)]);var lat1=routePoints[(0xd77+3996-0x1d13)].lat();var long1=routePoints[(0x1caa+526-0x1eb8)].lng();var lat2=routePoints[routePoints.length-(0x3cb+7780-0x222e)].lat();var long2=routePoints[routePoints.length-(0x1145+1255-0x162b)].lng();total_distance+=((LatLon.distHaversine(lat1,long1,lat2,long2).toPrecision((0x9d7+1135-0xe42)))*(0xd60+7263-0x25d7));redraw();updateDisplay();});for(var j=(0x979+6698-0x23a2);j<routePoints.length;++j){bounds.extend(routePoints[j]);var marker2=new GMarker(routePoints[j],Icon);if(togglemarkers==(0x6cc+2087-0xef2)){map.addOverlay(marker2);}if(routePoints.length>(0x1df8+979-0x21ca)){var lat1=routePoints[j].lat();var long1=routePoints[j].lng();var lat2=routePoints[j-(0x3f5+7115-0x1fbf)].lat();var long2=routePoints[j-(0x422+7843-0x22c4)].lng();total_distance+=((LatLon.distHaversine(lat1,long1,lat2,long2).toPrecision((0xe4f+2496-0x180b)))*(0x4bf+811-0x402));AddPolylines(lines,GreatCirclePoints(routePoints[routePoints.length-j],routePoints[routePoints.length-(0x1396+3370-0x20bf)-j]),lineColor,lineWidth);};}};function usePointFromPostcode(postcode,callbackFunction){localSearch.setSearchCompleteCallback(null,function(){if(localSearch.results[(0x228+711-0x4ef)]){var resultLat=localSearch.results[(0x526+5745-0x1b97)].lat;var resultLng=localSearch.results[(0x11eb+5086-0x25c9)].lng;var point=new GLatLng(resultLat,resultLng);callbackFunction(point);}});localSearch.execute(postcode);};function placeMarkerAtPoint(point){setCenterToPoint(point);};function setCenterToPoint(point){map.setCenter(point,(0x1368+4813-0x262b));};function clearLastLeg(){if(routePoints.length<(0x265+4111-0x1272))return;bounds=new GLatLngBounds();routePoints.pop();redraw();updateDisplay();};function clearMap(){total_distance=0.00;bounds=new GLatLngBounds();routePoints=[];map.clearOverlays();updateDisplay();};function statert(){alert(document.getElementById("\x72\x6a\x6f\x75\x72").checked);};function updateDisplay(){var dist=unit_handler.f(total_distance);document.getElementById("\x64\x69\x73\x74\x61\x6e\x63\x65").value=dist.toFixed((0x52+3182-0xcbd));};function toggleUnits(arg){if(arg=="\x4d\x49\x4c\x45\x53"){unit_handler=MILES;}else{unit_handler=KMS;}updateDisplay();};function calculateDistance(points){if(points.length<(0x709+2200-0xf9f))return (0x2db+4082-0x12cd);var dist=0.0;for(var i=(0x537+4924-0x1873);i<points.length-(0x275+6630-0x1c5a);i++){dist+=distance_between_points(points[i],points[i+(0x1d+1636-0x680)]);}return dist;};Math.deg2rad=function(x){return x*(Math.PI/180.0);};function distance_between_points(p1,p2){var a=Math.deg2rad((0x75a+4351-0x17ff)-p1.y);var b=Math.deg2rad((0x1b6f+1597-0x2152)-p2.y);var theta=Math.deg2rad(p2.x-p1.x);var c=Math.acos(Math.cos(a)*Math.cos(b)+Math.sin(a)*Math.sin(b)*Math.cos(theta));return c*EARTH_RADIUS;};function toggleReturn(){if((document.getElementById("\x72\x6a\x6f\x75\x72").checked)==true){total_distance*=(0x48c+3201-0x110b);}if((document.getElementById("\x72\x6a\x6f\x75\x72").checked)==false){total_distance/=(0x591+6060-0x1d3b);}updateDisplay();};function zoomtofitall(map){map.setZoom(map.getBoundsZoomLevel(bounds)-(0x1a33+404-0x1bc6));var clat=(bounds.getNorthEast().lat()+bounds.getSouthWest().lat())/(0x2503+168-0x25a9);var clng=(bounds.getNorthEast().lng()+bounds.getSouthWest().lng())/(0x17e0+2305-0x20df);map.setCenter(new GLatLng(clat,clng));};function ZoomOut(){zoomtofitall(map);};function x_half_distance_between_points(p1,p2){var a=p2.y+p1.y;return a/(0x1ab+1516-0x795);};function y_half_distance_between_points(p1,p2){var a=p2.x+p1.x;return a/(0xa68+6384-0x2356);};function disHalf(){var hwc=GreatCirclePoints(routePoints[routePoints.length-(0x36b+1454-0x917)],routePoints[routePoints.length-(0x181+7713-0x1fa1)]).length;var midpc=Math.ceil(hwc/(0xe97+2402-0x17f7));var midpf=Math.floor(hwc/(0x13c1+926-0x175d));var pointsc=[];var pointsf=[];points=GreatCirclePoints(routePoints[routePoints.length-(0x70b+1921-0xe8a)],routePoints[routePoints.length-(0x13b4+4265-0x245c)]);var xh=x_half_distance_between_points(points[midpc],points[midpf]);var yh=y_half_distance_between_points(points[midpc],points[midpf]);var hwp=new GPoint(yh,xh);var marker3=new GMarker(hwp);map.addOverlay(marker3);};function AddPolylines(lines,ps,lineColor,lineWidth){var line=new GPolyline(ps,lineColor,lineWidth);lines.push(line);map.addOverlay(line);};function GreatCirclePoints(p1,p2){var maxDistanceMeters=200000.0;var ps=[];if(p1.distanceFrom(p2)<=maxDistanceMeters){ps.push(p1);ps.push(p2);}else{var theta1=p1.lng()*radiansPerDegree;var phi1=(90.0-p1.lat())*radiansPerDegree;var x1=earthRadiusMeters*Math.cos(theta1)*Math.sin(phi1);var y1=earthRadiusMeters*Math.sin(theta1)*Math.sin(phi1);var z1=earthRadiusMeters*Math.cos(phi1);var theta2=p2.lng()*radiansPerDegree;var phi2=(90.0-p2.lat())*radiansPerDegree;var x2=earthRadiusMeters*Math.cos(theta2)*Math.sin(phi2);var y2=earthRadiusMeters*Math.sin(theta2)*Math.sin(phi2);var z2=earthRadiusMeters*Math.cos(phi2);var x3=(x1+x2)/2.0;var y3=(y1+y2)/2.0;var z3=(z1+z2)/2.0;var r3=Math.sqrt(x3*x3+y3*y3+z3*z3);var theta3=Math.atan2(y3,x3);var phi3=Math.acos(z3/r3);var p3=new GLatLng(90.0-phi3*degreesPerRadian,theta3*degreesPerRadian);var s1=GreatCirclePoints(p1,p3);var s2=GreatCirclePoints(p3,p2);for(var i=(0x49b+1574-0xac1);i<s1.length;++i)ps.push(s1[i]);for(var i=(0x430+1071-0x85e);i<s2.length;++i)ps.push(s2[i]);}return ps;};LatLon.distHaversine=function(lat1,lon1,lat2,lon2){var R=(0x2434+2214-0x13f7);var dLat=(lat2-lat1).toRad();var dLon=(lon2-lon1).toRad();lat1=lat1.toRad(),lat2=lat2.toRad();var a=Math.sin(dLat/(0x377+2867-0xea8))*Math.sin(dLat/(0x1c4b+37-0x1c6e))+Math.cos(lat1)*Math.cos(lat2)*Math.sin(dLon/(0x193a+3481-0x26d1))*Math.sin(dLon/(0x3ed+5279-0x188a));var c=(0x9cb+717-0xc96)*Math.atan2(Math.sqrt(a),Math.sqrt((0x72+9130-0x241b)-a));var d=R*c;return d;};LatLon.distCosineLaw=function(lat1,lon1,lat2,lon2){var R=6371;var d=Math.acos(Math.sin(lat1.toRad())*Math.sin(lat2.toRad())+Math.cos(lat1.toRad())*Math.cos(lat2.toRad())*Math.cos((lon2-lon1).toRad()))*R;return d;};LatLon.bearing=function(lat1,lon1,lat2,lon2){lat1=lat1.toRad();lat2=lat2.toRad();var dLon=(lon2-lon1).toRad();var y=Math.sin(dLon)*Math.cos(lat2);var x=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);return Math.atan2(y,x).toBrng();};LatLon.midPoint=function(lat1,lon1,lat2,lon2){lat1=lat1.toRad();lat2=lat2.toRad();var dLon=(lon2-lon1).toRad();var Bx=Math.cos(lat2)*Math.cos(dLon);var By=Math.cos(lat2)*Math.sin(dLon);lat3=Math.atan2(Math.sin(lat1)+Math.sin(lat2),Math.sqrt((Math.cos(lat1)+Bx)*(Math.cos(lat1)+Bx)+By*By));lon3=lon1.toRad()+Math.atan2(By,Math.cos(lat1)+Bx);if(isNaN(lat3)||isNaN(lon3))return null;return new LatLon(lat3.toDeg(),lon3.toDeg());};LatLon.prototype.destPoint=function(brng,d){var R=(0x1c58+947-0x728);var lat1=this.lat.toRad(),lon1=this.lon.toRad();brng=brng.toRad();var lat2=Math.asin(Math.sin(lat1)*Math.cos(d/R)+Math.cos(lat1)*Math.sin(d/R)*Math.cos(brng));var lon2=lon1+Math.atan2(Math.sin(brng)*Math.sin(d/R)*Math.cos(lat1),Math.cos(d/R)-Math.sin(lat1)*Math.sin(lat2));if(isNaN(lat2)||isNaN(lon2))return null;return new LatLon(lat2.toDeg(),lon2.toDeg());};LatLon.prototype.finalBrng=function(brng,d){var p1=this,p2=p1.destPoint(brng,d);var rev=LatLon.bearing(p2.lat,p2.lon,p1.lat,p1.lon);var rev=(rev+(0x1308+4186-0x22ae))%(0x769+6156-0x1e0d);return rev;};LatLon.distRhumb=function(lat1,lon1,lat2,lon2){var R=6371;var dLat=(lat2-lat1).toRad(),dLon=Math.abs(lon2-lon1).toRad();var dPhi=Math.log(Math.tan(lat2.toRad()/(0xcdc+1152-0x115a)+Math.PI/(0x59c+6096-0x1d68))/Math.tan(lat1.toRad()/(0x1051+3809-0x1f30)+Math.PI/(0x471+8296-0x24d5)));var q=dLat/dPhi;if(!isFinite(q))q=Math.cos(lat1.toRad());if(dLon>Math.PI)dLon=(0x129c+5144-0x26b2)*Math.PI-dLon;var d=Math.sqrt(dLat*dLat+q*q*dLon*dLon);return d*R;};LatLon.brngRhumb=function(lat1,lon1,lat2,lon2){var dLon=(lon2-lon1).toRad();var dPhi=Math.log(Math.tan(lat2.toRad()/(0x267+5762-0x18e7)+Math.PI/(0x606+3892-0x1536))/Math.tan(lat1.toRad()/(0x186+8513-0x22c5)+Math.PI/(0x16b6+2114-0x1ef4)));if(Math.abs(dLon)>Math.PI)dLon=dLon>(0x18c8+3647-0x2707)?-((0xd7d+1373-0x12d8)*Math.PI-dLon):((0x74a+5881-0x1e41)*Math.PI+dLon);return Math.atan2(dLon,dPhi).toBrng();};LatLon.prototype.destPointRhumb=function(brng,dist){var R=(0x1c17+8920-0x260c);var d=parseFloat(dist)/R;var lat1=this.lat.toRad(),lon1=this.lon.toRad();brng=brng.toRad();lat2=lat1+d*Math.cos(brng);var dPhi=Math.log(Math.tan(lat2/(0x809+1360-0xd57)+Math.PI/(0x67+9263-0x2492))/Math.tan(lat1/(0x209+7281-0x1e78)+Math.PI/(0x1729+4052-0x26f9)));var q=(lat2-lat1)/dPhi;if(!isFinite(q))q=Math.cos(lat1);var dLon=d*Math.sin(brng)/q;if(Math.abs(lat2)>Math.PI/(0x9e8+3207-0x166d))lat2=lat2>(0xd77+37-0xd9c)?Math.PI-lat2:-Math.PI-lat2;lon2=(lon1+dLon+Math.PI)%((0xdb9+5686-0x23ed)*Math.PI)-Math.PI;if(isNaN(lat2)||isNaN(lon2))return null;return new LatLon(lat2.toDeg(),lon2.toDeg());};function LatLon(lat,lon){this.lat=lat;this.lon=lon;};LatLon.prototype.toString=function(){return this.lat.toLat()+"\x2c\x20"+this.lon.toLon();};String.prototype.parseDeg=function(){if(!isNaN(this))return Number(this);var degLL=this.replace(/^-/,'').replace(/[NSEW]/i,'');var dms=degLL.split(/[^0-9.,]+/);for(var i in dms)if(dms[i]=='')dms.splice(i,(0x501+2014-0xcde));switch(dms.length){case (0x1af+173-0x259):var deg=dms[(0x1ac4+182-0x1b7a)]/(0x13fa+1857-0x1b3a)+dms[(0x1be7+270-0x1cf4)]/(0x1473+3198-0x20b5)+dms[(0xa91+5010-0x1e21)]/(0x1ea9+4192-0x20f9);break;case (0x807+7193-0x241e):var deg=dms[(0x3e4+5875-0x1ad7)]/(0xbb5+5543-0x215b)+dms[(0x73d+6440-0x2064)]/(0x753+5894-0x1e1d);break;case (0x11c4+5311-0x2682):if(/[NS]/i.test(this))degLL="\x30"+degLL;var deg=dms[(0xcd0+6175-0x24ef)].slice((0xc16+3149-0x1863),(0x11f3+3323-0x1eeb))/(0x18ab+3011-0x246d)+dms[(0x148+2376-0xa90)].slice((0xa25+6685-0x243f),(0xd70+407-0xf02))/(0x803+1525-0xdbc)+dms[(0x12b0+1413-0x1835)].slice((0xbfb+830-0xf34))/3600;break;default:return NaN;};if(/^-/.test(this)||/[WS]/i.test(this))deg=-deg;return deg;};Number.prototype.toRad=function(){return this*Math.PI/(0x934+1013-0xc75);};Number.prototype.toDeg=function(){return this*(0x1e1+3342-0xe3b)/Math.PI;};Number.prototype.toBrng=function(){return(this.toDeg()+(0xda0+202-0xd02))%(0x304+9449-0x2685);};Number.prototype.toDMS=function(){var d=Math.abs(this);d+=(0x921+798-0xc3e)/(0x1ff5+50-0x407);var deg=Math.floor(d);var min=Math.floor((d-deg)*(0xccd+1458-0x1243));var sec=Math.floor((d-deg-min/(0x1c7c+279-0x1d57))*(0x105d+8218-0x2267));if(deg<(0xd38+1266-0x11c6))deg="\x30"+deg;if(deg<(0x122c+16-0x1232))deg="\x30"+deg;if(min<(0xe5c+3351-0x1b69))min="\x30"+min;if(sec<(0x125a+2602-0x1c7a))sec="\x30"+sec;return deg+'\u00B0'+min+'\u2032'+sec+'\u2033';};Number.prototype.toLat=function(){return this.toDMS().slice((0x6ea+6833-0x219a))+(this<(0x394+8734-0x25b2)?"\x53":"\x4e");};Number.prototype.toLon=function(){return this.toDMS()+(this>(0x3b7+8126-0x2375)?"\x45":"\x57");};Number.prototype.toPrecision=function(fig){if(this==(0x21b0+102-0x2216))return (0xcf1+702-0xfaf);var scale=Math.ceil(Math.log(this)*Math.LOG10E);var mult=Math.pow((0x74d+1498-0xd1d),fig-scale);return Math.round(this*mult)/mult;};


